import{f as y,h,i as d,p as _,E as S,j as k,k as v,b as A,q as R,S as g}from"./runtime.Bxjg-WS-.js";import{h as u,a as q,H as x,r as N,s as p,b as T,c as F}from"./disclose-version.Qpl9d9YN.js";function O(a,f,r,i=null,t=!1){u&&q();var s=a,e=null,l=null,n=null,b=t?S:0;y(()=>{if(n===(n=!!f()))return;let c=!1;if(u){const o=s.data===x;n===o&&(s=N(),p(s),T(!1),c=!0)}n?(e?h(e):e=d(()=>r(s)),l&&_(l,()=>{l=null})):(l?h(l):i&&(l=d(()=>i(s))),e&&_(e,()=>{e=null})),c&&T(!0)},b),u&&(s=F)}function E(a,f){var i;var r=a&&((i=a[g])==null?void 0:i.t);return a===f||r===f}function Y(a={},f,r,i){return k(()=>{var t,s;return v(()=>{t=s,s=[],A(()=>{a!==r(...s)&&(f(a,...s),t&&E(r(...t),a)&&f(null,...t))})}),()=>{R(()=>{s&&E(r(...s),a)&&f(null,...s)})}}),a}export{Y as b,O as i};
